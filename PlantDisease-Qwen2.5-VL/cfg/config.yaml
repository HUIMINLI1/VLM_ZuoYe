# ======================================================================================================
# 常规设置
# ======================================================================================================
log_level: 'INFO'        # DEBUG, INFO, WARNING, ERROR, CRITICAL
briefing_process: 'stream'
# 简报/诊断过程展示方式：
# 'stage'  : 每个阶段输出一次
# 'stream' : 像对话一样流式输出（推荐用于诊断）
# 'None'   : 不展示，仅保存结果


# ======================================================================================================
# RAG（检索增强生成）设置 —— 农业病害领域
# ======================================================================================================
# 病害与农业知识库路径
plant_disease_filepath: "database/plant_diseases.json"      # 作物病害数据库（核心）
crop_knowledge_filepath: "database/crops.json"              # 作物基础知识
treatment_filepath: "database/treatments.json"              # 防治与用药数据库
others_filepath: "database/agriculture_moreinfo.docx"       # 其他农业资料（论文、规范等）

# 向量模型设置
embedding_device: "cuda"        # "cuda", "cpu", "mps", "npu", ...
embedding_model: "thenlper/gte-large-zh"   # 中文语义检索效果稳定，适合农业文本
vector_search_top_k: 10         # 每次检索返回的最大文本块数量


# ======================================================================================================
# 视觉语言模型（VLM）设置
# ======================================================================================================
# 推理模型（已通过 LoRA 微调后的 Plant-Qwen2.5-VL）
inference_model: "../Plant-Qwen2.5-VL-7B-Instruct"

# 初始对话上下文（System Prompt）
raw_messages:
  - role: "system"
    content: |
      你是 Plant-QwenIA（Plant Intelligence Assistant），
      一个专注于作物病害智能诊断的多模态视觉语言模型。

      你的核心能力包括：
      1. 基于图像的作物病害识别与分析（叶片、果实、茎秆等）。
      2. 结合视觉特征（病斑颜色、形状、分布、纹理）与农业专业知识，
         对可能的病害类型进行科学、可解释的诊断推理。
      3. 在推理过程中，充分利用“额外信息”和农业知识库（RAG），
         降低幻觉风险，提升结论的专业性与可信度。
      4. 给出结构清晰的诊断结果，包括：
         - 可能病害名称（可多候选）
         - 诊断依据（视觉症状 + 知识支持）
         - 发病条件分析（如环境、季节）
         - 科学、可行的防治建议

      请遵循以下原则：
      - 推理过程基于可观察的视觉证据和权威农业知识
      - 避免无依据的臆测或夸大风险
      - 语言专业、严谨，但表达清晰，便于农业从业者理解

  - role: "user"
    content: []


# ======================================================================================================
# 输出结果保存路径
# ======================================================================================================
briefings_dir: "../diagnosis_reports/briefings"     # 简要诊断结论
fullreports_dir: "../diagnosis_reports/full_reports" # 完整诊断分析报告
logs_dir: "../server_logs"


# ======================================================================================================
# 病害检测 / 症状识别设置（用于视觉侧结构化信息）
# ======================================================================================================
# 病害或症状类别（需与视觉检测/分割模型类别顺序一致）
disease_classes:
  - "叶斑"
  - "锈病"
  - "霉病"
  - "枯萎"
  - "腐烂"
  - "黄化"
  - "畸形"

# 可选：细粒度症状或病害子类
sub_disease_classes:
  叶斑:
    - "褐色斑"
    - "黑色斑"
    - "圆形斑"
  霉病:
    - "白粉"
    - "灰霉"
  腐烂:
    - "软腐"
    - "干腐"
